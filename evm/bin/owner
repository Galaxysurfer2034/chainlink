#!/usr/bin/env node

(async () => {

  // imports
  const ethers = require('ethers')
  const { utils } = ethers

  // Setup JSON RPC provider
  const providerURL = process.env['ETH_HTTP_URL'] || 'http://localhost:18545'
  const privateKey =
    process.env['PRIVATE_KEY'] ||
    '4d6cf3ce1ac71e79aa33cf481dedf2e73acb548b1294a70447c960784302d2fb'
  const provider = new ethers.providers.JsonRpcProvider(providerURL)
  const wallet = new ethers.Wallet(privateKey, provider)

  // encode function call
  debugger
//   const funcSelector = utils.hexDataSlice(utils.defaultAbiCoder.encode("owner()"), 0, 4) // "transferOwnership(address)"
  const data = utils.hexDataSlice(utils.id('currentPrice()'), 0, 4); // "transferOwnership(address)"
//   const encodedParams = utils.defaultAbiCoder.encode(['address'], [recipient])
//   const data = utils.hexlify(utils.concat([funcSelector, encodedParams]))

  // make function call
  const result = await provider.call({
    data,
    to: "0x83e41643C2598C4d6a78d68cf506bF209a22ba5d"
  })
  console.log(result)
  // const owner = utils.defaultAbiCoder.decode(['address'], result)
  // console.log(owner[0])
})()
