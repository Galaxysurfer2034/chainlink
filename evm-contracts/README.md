<br/>
<div style="background: url(https://assets-global.website-files.com/5e7dd1fb8fba988277039ac9/5ec695f7d0db4bb3598d218a_hero-63603c3d.jpg) border-box center no-repeat; background-size: 100%; width: 100%; height: 200px; display:flex; justify-content: center; align-items: center;" >
    <a href="https://chain.link/" target="_blank" style="display:flex; justify-content: center; font-size: 1.1rem; line-height: 37px;">
        <img src="https://assets-global.website-files.com/5e7dd1fb8fba988277039ac9/5e8ee1e83dac598203807d5f_Chainlink%20Logo.svg" width="119" alt="Chainlink logo">
        <span style="color: white;">/Contracts</span>
    </a>
</div>

[![GitHub tag (latest SemVer)](https://img.shields.io/github/tag/smartcontractkit/chainlink?style=flat-square)](https://github.com/smartcontractkit/chainlink/releases)
[![GitHub license](https://img.shields.io/github/license/smartcontractkit/chainlink?style=flat-square)](https://github.com/smartcontractkit/chainlink/blob/master/LICENSE)
[![GitHub workflow changelog](https://img.shields.io/github/workflow/status/smartcontractkit/chainlink/Changelog?style=flat-square&label=github-actions)](https://github.com/smartcontractkit/chainlink/actions?query=workflow%3AChangelog)
[![CircleCI build](https://img.shields.io/circleci/build/github/smartcontractkit/chainlink/master?style=flat-square&label=circleci)](https://circleci.com/gh/smartcontractkit/chainlink/tree/master)
[![GitHub contributors](https://img.shields.io/github/contributors-anon/smartcontractkit/chainlink?style=flat-square)](https://github.com/smartcontractkit/chainlink/graphs/contributors)
[![npm downloads](https://img.shields.io/npm/dt/@chainlink/contracts?style=flat-square)](https://npmjs.com/package/@chainlink/contracts)
[![GitHub commit activity](https://img.shields.io/github/commit-activity/y/smartcontractkit/chainlink?style=flat-square)](https://github.com/smartcontractkit/chainlink/commits/master)

# @chainlink/contracts

Chainlink's solidity contracts and contract abstractions

## ⚠️ Migration Notice

This package stores all of chainlink's smart contracts, previously known as the `evm/` directory. The previous package was called `chainlink`, now it is `@chainlink/contracts`.

## Installation

```sh
# via Yarn
$ yarn add @chainlink/contracts

# via npm
$ npm install @chainlink/contracts --save
```

## Directory Structure

This package makes use of `@chainlink/belt` to output artifacts along with ethers.js and truffle contract abstractions from the smart contracts stored within `src`. The resulting structure of the package when published looks like:

```sh
contracts
├── abi # abi output from src/
│   ├── v0.4
│   ├── v0.5
│   └── v0.6
├── ethers # ethers contract abstractions codegenned from abis
│   ├── v0.4
│   ├── v0.5
│   └── v0.6
├── src # the contracts themselves, in .sol form
│   ├── v0.4
│   ├── v0.5
│   └── v0.6
└── truffle  # truffle contract abstractions codegenned from abis
    ├── v0.4
    ├── v0.5
    └── v0.6
```

## Usage

These smart contracts can be imported as a dependency in various ways described below.

### Solidity

The solidity smart contracts themselves can simply be imported via the `src` directory of `@chainlink/contracts`. If you wanted to consume the v0.4.x version of our Oracle smart contract, you could do the following:

```solidity
import "@chainlink/contracts/src/v0.4/Chainlinked.sol";
```

### Artifacts

JSON artifacts generated by [sol-compiler](https://sol-compiler.com/) are available under the `abi` directory. If you wanted to consume the v0.4.x version of our Oracle JSON artifact with Javascript, you could do the following:

```js
const OracleV4Json = require('@chainlink/contracts/abi/v0.4/Oracle.json')
```

### Ethers

This library ships with [ethers.js](https://github.com/ethers-io/ethers.js/) contract abstractions generated by [typechain](https://github.com/ethereum-ts/TypeChain). To use these, make sure you have ethers.js installed as a dependency:

```sh
# via Yarn
$ yarn add ethers@^4.0.44

# via npm
$ npm install ethers@^4.0.44 --save
```

If you wanted to consume the v0.4.x version of our Oracle with JavaScript, you could do the following:

```ts
import { OracleFactory } from '@chainlink/contracts/ethers/v0.4/OracleFactory'
```

This gives a fully typed (if using TypeScript) version of a ethers.js contract factory. See the [ethers.js](https://docs.ethers.io/ethers.js/html/api-contract.html) documentation on usage.

### Truffle

This library ships with [@truffle/contract](https://github.com/trufflesuite/truffle/tree/master/packages/contract#readme) abstractions of each of our smart contracts. To use these, make sure you have @truffle/contract as a dependency.

```sh
# via Yarn
$ yarn add @truffle/contract@^4.1.8

# via npm
$ npm install @truffle/contract@^4.1.8 --save
```

If you wanted to consume the v0.4.x version of our Oracle with JavaScript, you could do the following:

```js
const { Oracle } = require('@chainlink/contracts/truffle/v0.4/Oracle')
```

For usage, see the [@truffle/contract](https://github.com/trufflesuite/truffle/tree/master/packages/contract#readme) documentation.

For ease of use with testing, if the environment variable `NODE_ENV` is set, the imported truffle contract abstraction will automatically set its provider to `web3.currentProvider`, avoiding the need to perform a `setProvider` call before using it during your truffle tests.

```sh
NODE_ENV=true yarn truffle test
```

## Development

```bash
# Clone Chainlink repository
$ git clone https://github.com/smartcontractkit/chainlink.git

# Continuing via Yarn
$ yarn install
$ yarn setup:contracts

# Continuing via npm
$ npm install
$ npm run setup:contracts
```

## Testing

After completing the above [Development](#Development) commands, run tests with:

```sh
# From this directory, `evm-contracts` via Yarn
$ yarn test

# via npm
$ npm run test

# From project root
$ yarn wsrun @chainlink/contracts test
```

## Contributing

Contributions are welcome! Please refer to
[Chainlink's contributing guidelines](./docs/CONTRIBUTING.md) for detailed 
contribution information.

Thank you!

## License

[MIT](https://choosealicense.com/licenses/mit/)
