#!/usr/bin/env bash

set -e

SCRIPTPATH="$( cd "$(dirname "$0")" >/dev/null 2>&1 ; pwd -P )"
python3 -m pip install --require-hashes -r $SCRIPTPATH/requirements.txt
solc-select install 0.6.6
solc-select install 0.8.4

$SCRIPTPATH/native_solc6_compile core/v0.6/Flags.sol
$SCRIPTPATH/native_solc6_compile core/v0.6/Oracle.sol
$SCRIPTPATH/native_solc6_compile core/v0.6/FluxAggregator.sol
$SCRIPTPATH/native_solc6_compile core/v0.6/VRFCoordinator.sol
$SCRIPTPATH/native_solc6_compile core/v0.6/tests/VRFRequestIDBaseTestHelper.sol
$SCRIPTPATH/native_solc6_compile core/v0.6/tests/VRFTestHelper.sol
$SCRIPTPATH/native_solc6_compile core/v0.6/Chainlink.sol
$SCRIPTPATH/native_solc6_compile core/v0.6/VRFRequestIDBase.sol
$SCRIPTPATH/native_solc6_compile client/v0.6/ChainlinkClient.sol
$SCRIPTPATH/native_solc6_compile client/v0.6/tests/VRFConsumer.sol
$SCRIPTPATH/native_solc6_compile client/v0.6/VRFConsumerBase.sol

$SCRIPTPATH/native_solc8_compile core/v0.8/dev/Chainlink.sol
$SCRIPTPATH/native_solc8_compile core/v0.8/dev/ChainlinkClient.sol
$SCRIPTPATH/native_solc8_compile core/v0.8/dev/VRFRequestIDBase.sol
$SCRIPTPATH/native_solc8_compile core/v0.8/dev/VRFConsumerBase.sol
$SCRIPTPATH/native_solc8_compile core/v0.8/tests/VRFConsumer.sol
$SCRIPTPATH/native_solc8_compile core/v0.8/tests/VRFRequestIDBaseTestHelper.sol
